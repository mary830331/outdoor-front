(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0fa9":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("admin"),s("div",{staticClass:"top-mt left-layout-lg "},[s("div",{staticClass:"justify-center row margin-15"},[s("q-dialog",{model:{value:t.Forum,callback:function(e){t.Forum=e},expression:"Forum"}},[s("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[s("q-form",{staticClass:"q-ma-xl row",on:{submit:t.onSubmit,reset:t.onReset}},[s("q-input",{staticClass:"col-12",attrs:{filled:"",dense:"",label:"標題","lazy-rules":"",rules:[function(t){return t&&t.length>0||"請勿空白"}]},model:{value:t.forum.title,callback:function(e){t.$set(t.forum,"title",e)},expression:"forum.title"}}),s("div",{staticClass:" col-6"},[t._v("上架文章\n            "),s("div",{staticClass:"q-ml-md q-my-md"},[s("q-radio",{attrs:{dense:"",val:"true",value:!0,label:"上架"},model:{value:t.forum.sell,callback:function(e){t.$set(t.forum,"sell",e)},expression:"forum.sell"}}),s("q-radio",{attrs:{dense:"",val:"false",value:!1,label:"下架"},model:{value:t.forum.sell,callback:function(e){t.$set(t.forum,"sell",e)},expression:"forum.sell"}})],1)]),s("div",{staticClass:"col-6"},[t._v("\n              檔案上傳\n              "),s("img-inputer",{attrs:{accept:"image/*",theme:"light",size:"normal","bottom-text":"點選或拖拽圖片以修改","hover-text":"點選或拖拽圖片以修改",placeholder:"點選或拖拽選擇圖片","max-size":1024,"exceed-size-text":"檔案大小不能超過"},model:{value:t.forum.image,callback:function(e){t.$set(t.forum,"image",e)},expression:"forum.image"}})],1),s("q-input",{staticClass:"col-12",attrs:{filled:"",label:"內容",type:"textarea","lazy-rules":""},model:{value:t.forum.content,callback:function(e){t.$set(t.forum,"content",e)},expression:"forum.content"}}),s("div",{staticClass:"q-mt-md"},[s("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],1)],1)],1),s("q-dialog",{attrs:{label:"揪團文章"},model:{value:t.Group,callback:function(e){t.Group=e},expression:"Group"}},[s("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[s("q-form",{staticClass:"q-ma-xl row",on:{submit:t.onSubmit,reset:t.onReset}},[s("div",{staticClass:"col-6"},[s("q-input",{staticClass:"col-6",attrs:{filled:"",dense:"",label:"📍地點標題","lazy-rules":"",rules:[function(t){return t&&t.length>0||"請勿空白"}]},model:{value:t.group.name,callback:function(e){t.$set(t.group,"name",e)},expression:"group.name"}}),s("q-input",{attrs:{filled:"",dense:"",label:"🕖時間",rules:[function(t){return t&&t.length>0||"請勿空白"}]},model:{value:t.group.time,callback:function(e){t.$set(t.group,"time",e)},expression:"group.time"}}),s("q-select",{attrs:{filled:"",dense:"",label:"活動分類",options:t.categories,"lazy-rules":"",rules:[function(t){return t&&t.length>0||"請勿空白"}]},model:{value:t.group.category,callback:function(e){t.$set(t.group,"category",e)},expression:"group.category"}}),s("div",{staticClass:"q-my-sm q-mb-xs"},[t._v("上架活動\n            "),s("div",{staticClass:"q-gutter-xl"},[s("q-radio",{attrs:{dense:"",val:"true",value:!0,label:" 上架 🔺"},model:{value:t.group.sell,callback:function(e){t.$set(t.group,"sell",e)},expression:"group.sell"}}),s("q-radio",{attrs:{dense:"",val:"false",value:!1,label:" 下架 🔻"},model:{value:t.group.sell,callback:function(e){t.$set(t.group,"sell",e)},expression:"group.sell"}})],1)])],1),s("div",{staticClass:"col-6"},[s("q-input",{staticClass:"q-ml-md ",attrs:{filled:"",dense:"",label:"💰預估預算金額","lazy-rules":"",rules:[function(t){return t&&t.length>0||"請勿空白"}]},model:{value:t.group.price,callback:function(e){t.$set(t.group,"price",e)},expression:"group.price"}}),s("p",{staticClass:"q-ml-md"},[t._v("檔案上傳")]),s("img-inputer",{staticClass:"q-ml-md",staticStyle:{width:"95%"},attrs:{accept:"image/*",theme:"light",size:"normal ","bottom-text":"點選或拖拽圖片以修改","hover-text":"點選或拖拽圖片以修改",placeholder:"點選或拖拽選擇圖片","max-size":1024,"exceed-size-text":"檔案大小不能超過"},model:{value:t.group.image,callback:function(e){t.$set(t.group,"image",e)},expression:"group.image"}})],1),s("q-input",{staticClass:"q-mt-sm col-12",attrs:{filled:"",dense:"",label:"活動行程",type:"textarea","lazy-rules":""},model:{value:t.group.description,callback:function(e){t.$set(t.group,"description",e)},expression:"group.description"}}),s("div",{staticClass:"col-12 q-mt-xs"},[t._v("\n              注意事項\n            "),s("q-input",{attrs:{filled:"",dense:"",type:"textarea","lazy-rules":""},model:{value:t.group.precautions,callback:function(e){t.$set(t.group,"precautions",e)},expression:"group.precautions"}})],1),s("div",{staticClass:"q-mt-md"},[s("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],1)],1)],1),s("q-card",{staticClass:"col-12"},[s("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"negative","indicator-color":"negative",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab",{attrs:{name:"Forum-btn",label:"討論區文章"}}),s("q-tab",{attrs:{name:"Group-btn",label:"揪團文章"}})],1),s("q-separator"),s("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("q-tab-panel",{attrs:{name:"Forum-btn"}},[s("q-btn",{staticStyle:{width:"30%"},attrs:{color:"negative",label:"新增"},on:{click:function(e){t.Forum=!0}}}),s("q-table",{ref:"table",attrs:{data:t.products,columns:t.columns,title:t.group._id.length>0?"編輯討論區文章":"新增討論區文章"}})],1),s("q-tab-panel",{attrs:{name:"Group-btn"}},[s("q-btn",{staticStyle:{width:"30%"},attrs:{color:"negative",label:"新增"},on:{click:function(e){t.Group=!0}}}),s("q-table",{ref:"table",attrs:{data:t.products,columns:t.columns,grid:"",title:t.group._id.length>0?"編輯揪團文章":"新增揪團文章"},scopedSlots:t._u([{key:"item",fn:function(e){return[s("div",{staticClass:" col-sm-6 col-md-4 col-lg-3 col-xs-12"},[s("q-card",{staticClass:" text-grey-8 q-ma-sm"},[s("img",{staticClass:"text-center",staticStyle:{width:"100%",height:"150px"},attrs:{src:e.row.image}}),s("div",{staticClass:"q-pa-sm"},[s("q-card-section",{staticClass:"text-center q-pa-none"},[s("strong",{staticClass:"text-weight-bold text-h6"},[t._v(t._s(e.row.name))])]),s("q-card-section",{staticClass:"text-center q-pa-none"},[s("strong",{staticClass:"text-weight-light text-body2"},[t._v("預估金額:"),s("br"),t._v(t._s(e.row.price))])]),s("q-card-section",{staticClass:"text-center q-pa-none"},[s("strong",{staticClass:"col-6 text-weight-light text-body2"},[t._v("分類:"+t._s(e.row.category))])]),s("q-card-section",{staticClass:"text-center row q-pa-xs"},[s("strong",{staticClass:"col-6 text-weight-light"},[t._v("上架: "+t._s(e.row.sell?"⭕":"❌"))]),s("q-btn",{attrs:{rounded:"",size:"xs",color:"secondary",label:"編輯"},on:{click:function(s){return t.editProduct(e.pageIndex)}}})],1)],1)])],1)]}}])})],1)],1)],1)],1)])],1)},l=[],r=(s("e01a"),s("f529")),o={name:"AdminArrticle",data(){return{columns:[{name:"image",label:"圖片",field:"image"},{name:"name",label:"活動名稱",field:"name"},{name:"price",label:"預估價格",field:"price"},{name:"category",label:"分類 ",field:"category"},{name:"sell",label:"上架",field:"sell"},{name:"action",label:"操作",field:"action"}],tab:"Forum-btn",forum:{title:"",description:"",sell:"true",images:null},Forum:!1,Group:!1,group:{name:"",time:"",price:"",description:"",image:null,sell:"true",category:"",precautions:"1.食宿自理\n2.出發前三天視氣象預報決定是否出發\n3.視情況調整行程，主揪有權決定是否撤退\n4.須具備獨自走完全程的能力，主揪只是想找人同行，沒有幫人背東西.找路.分享裝備的義務\n5.需配合參與行前安全評估會議，確認同行者有製作地圖且具備足夠登山知識\n6.若有行前體訓請盡量參加，可能是先約座簡單的山爬互相認識，跟完全陌生人爬長天數會抖\n7.有慢性疾病請事先告知，隨團無醫生能急救\n8.此為自組團，可一起申請入園入山，主揪非領隊、嚮導、保姆之職，只是熱心發起活動。會要求簽署風險自負同意書\n9.參與的夥伴們行進間互助合作及安全提醒\n\n",_id:"",authorId:"",authorName:"",authorAge:"",authorNews:"",authorImg:"",index:-1},products:[],categories:["百岳","中級山","郊山","探勘","秘境","露營","野溪溫泉","溯溪","水肺潛水","自由潛水","SUP","衝浪","其他"]}},components:{Admin:r["a"]},computed:{},methods:{async onSubmit(t){t.preventDefault();const e=new FormData;for(const a in this.group)"_id"!==a&&e.append(a,this.group[a]);try{if(0===this.group._id.length){const{data:t}=await this.api.post("/products",e,{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.products.push(t.result),this.$q.notify({color:"positive",icon:"check_circle",message:"發表成功 !"})}else{const{data:t}=await this.api.patch("/products/"+this.group._id,e,{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.products[this.group.index]={...this.group,image:t.result.image}}this.Group=!1}catch(s){this.$q.notify({color:"positive",icon:"error",message:`錯誤 ${s.response.data.message}`}),console.log(s)}},onReset(t){this.modalSubmitting?t.preventDefault():(this.forum.title=null,this.forum.description=null,this.forum.images=null,this.forum.content=null,this.forum.sell="true",this.group.name=null,this.group.time=null,this.group.price=null,this.group.description=null,this.group.images=null,this.group.sell="true",this.group.precautions="1.食宿自理\n2.出發前三天視氣象預報決定是否出發\n3.視情況調整行程，主揪有權決定是否撤退\n4.須具備獨自走完全程的能力，主揪只是想找人同行，沒有幫人背東西.找路.分享裝備的義務\n5.需配合參與行前安全評估會議，確認同行者有製作地圖且具備足夠登山知識\n6.若有行前體訓請盡量參加，可能是先約座簡單的山爬互相認識，跟完全陌生人爬長天數會抖\n7.有慢性疾病請事先告知，隨團無醫生能急救\n8.此為自組團，可一起申請入園入山，主揪非領隊、嚮導、保姆之職，只是熱心發起活動。會要求簽署風險自負同意書\n9.參與的夥伴們行進間互助合作及安全提醒\n\n      ",this.group.category="")},editProduct(t){this.group={...this.products[t],image:null,index:t},this.Group=!0}},async created(){try{this.group.authorId=this.$store.getters["user/user"]._id,this.group.authorName=this.$store.getters["user/user"].name,this.group.authorAge=this.$store.getters["user/user"].age,this.group.authorNews=this.$store.getters["user/user"].news,this.group.authorImg=this.$store.getters["user/user"].image;const{data:t}=await this.api.get("/products/all/"+this.$route.params.id,{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.products=t.result}catch(t){console.log(t),this.$q.notify({color:"positive",icon:"error",message:"取得商品失敗"})}}},i=o,n=s("2877"),u=s("24e8"),c=s("f09f"),m=s("0378"),p=s("27f9"),d=s("3786"),g=s("9c40"),h=s("ddd8"),b=s("429b"),f=s("7460"),v=s("eb85"),q=s("adad"),x=s("823b"),y=s("eaac"),C=s("a370"),w=s("eebe"),k=s.n(w),$=Object(n["a"])(i,a,l,!1,null,null,null);e["default"]=$.exports;k()($,"components",{QDialog:u["a"],QCard:c["a"],QForm:m["a"],QInput:p["a"],QRadio:d["a"],QBtn:g["a"],QSelect:h["a"],QTabs:b["a"],QTab:f["a"],QSeparator:v["a"],QTabPanels:q["a"],QTabPanel:x["a"],QTable:y["a"],QCardSection:C["a"]})}}]);